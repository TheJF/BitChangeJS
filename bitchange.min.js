/* BitChange.js v1.0 | https://github.com/TheJF/BitChangeJS | Copyright 2012 Jean-Francois Arseneau
 *
 * Permission is hereby granted, free of charge, to any person obtaining a
 * copy of this software and associated documentation files (the "Software"),
 * to deal in the Software without restriction, including without limitation
 * the rights to use, copy, modify, merge, publish, distribute, sublicense,
 * and/or sell copies of the Software, and to permit persons to whom
 * the Software is furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included
 * in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
 * OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 */
 $(document).ready(function(){function g(a,b){multiple=Math.pow(10,b);roundedNumber=Math.round(a*multiple)/multiple;stringifiedNumber=String(roundedNumber);10>stringifiedNumber.split(".")[1]?roundedNumber+="0":void 0===stringifiedNumber.split(".")[1]&&(roundedNumber+=".00");return roundedNumber}function d(a){a=e(a);a=f(a);switch(a){case "btcusd":case "btccad":return"$";case "btceur":return"\u20ac";case "btcjpy":case "btccny":return"\u00a5";case "btcgbp":return"\u00a3";default:return""}}function i(a){a= f(a);void 0===window.mtgox[a]&&$.ajax({type:"GET",url:mtgox[a+"URL"],dataType:"json",success:function(b){window.mtgox[a]=b.query.results.json["return"]},error:function(a,b,c){console.log(c)}});return!0}function f(a){switch(a){case "usdbtc":a="btcusd";break;case "cadbtc":a="btccad";break;case "eurbtc":a="btceur";break;case "jpybtc":a="btcjpy";break;case "gbpbtc":a="btcgbp";break;case "cnybtc":a="btccny"}return a}function h(a){a=f(a);return void 0===window.mtgox[a]?(console.log("JSON failed to load"), 0):window.mtgox[a].avg.value}function e(a){classes=$(a).attr("class");classes=classes.split(" ");for(a=0;a<classes.length;a++)for(var b=0;b<conversions.length;b++)if(classes[a]===conversions[b])return classes[a];return!1}window.mtgox={btcusdURL:"http://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20json%20where%20url%3D%22https%3A%2F%2Fmtgox.com%2Fapi%2F1%2FBTCUSD%2Fticker%22&format=json&callback=?",btccadURL:"http://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20json%20where%20url%3D%22https%3A%2F%2Fmtgox.com%2Fapi%2F1%2FBTCUSD%2Fticker%22&format=json&callback=?", btceurURL:"http://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20json%20where%20url%3D%22https%3A%2F%2Fmtgox.com%2Fapi%2F1%2FBTCEUR%2Fticker%22&format=json&callback=?",btcjpyURL:"http://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20json%20where%20url%3D%22https%3A%2F%2Fmtgox.com%2Fapi%2F1%2FBTCJPY%2Fticker%22&format=json&callback=?",btcgbpURL:"http://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20json%20where%20url%3D%22https%3A%2F%2Fmtgox.com%2Fapi%2F1%2FBTCGBP%2Fticker%22&format=json&callback=?", btccnyURL:"http://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20json%20where%20url%3D%22https%3A%2F%2Fmtgox.com%2Fapi%2F1%2FBTCCNY%2Fticker%22&format=json&callback=?"};window.bitcoinFiat="btcusd btccad btceur btcjpy btcgbp btccny".split(" ");window.fiatBitcoin="usdbtc cadbtc eurbtc jpybtc gbpbtc cnybtc".split(" ");window.bitcoinFiatClasses=".btcusd, .btccad, .btceur, .btcjpy, .btcgbp, .btccny";window.fiatBitcoinClasses=".usdbtc, .cadbtc, .eurbtc, .jpybtc, .gbpbtc, .cnybtc";window.conversions= bitcoinFiat.concat(fiatBitcoin);for(var b="",c=0;c<bitcoinFiat.length;c++)b=b+"."+bitcoinFiat[c]+",";b=$(b);for(c=0;c<b.length;c++)$(b[c]).val(b[c].innerHTML),$(b[c]).prepend("\u0243");b="";for(c=0;c<fiatBitcoin.length;c++)b=b+"."+fiatBitcoin[c]+",";b=$(b);for(c=0;c<b.length;c++)$(b[c]).val(b[c].innerHTML),$(b[c]).prepend(d(b[c]));for(b=0;b<bitcoinFiat.length;b++)c="",c=$("."+bitcoinFiat[b]),0<c.length&&i(bitcoinFiat[b]);$(bitcoinFiatClasses).hover(function(){var a=e(this);originalValue=$(this).val(); avgValue=h(a);0!==avgValue&&(exchangedValue=originalValue*avgValue,exchangedValue=g(exchangedValue,2),$(this).html(d(this)+exchangedValue))},function(){$(this).html("\u0243"+$(this).val())});$(fiatBitcoinClasses).hover(function(){originalValue=$(this).val();var a=e(this);avgValue=h(a);0!==avgValue&&(exchangedValue=originalValue/avgValue,exchangedValue=g(exchangedValue,2),$(this).html("\u0243"+exchangedValue))},function(){$(this).html(d(this)+$(this).val())})});